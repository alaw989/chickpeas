---
phase: 02-section-animations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/sections/HomePage.vue
autonomous: true

must_haves:
  truths:
    - "Hero background image moves slower than page scroll (parallax effect)"
    - "Parallax effect is disabled on mobile/touch devices"
    - "Parallax uses only GPU-accelerated properties (transform)"
    - "Animation respects prefers-reduced-motion"
  artifacts:
    - path: "components/sections/HomePage.vue"
      provides: "CSS scroll-driven parallax on hero image"
      contains: "animation-timeline: scroll"
  key_links:
    - from: "NuxtImg hero background"
      to: "CSS scroll-driven animation"
      via: "parallax-image class with @keyframes"
      pattern: "parallax.*animation-timeline.*scroll"
---

<objective>
Add subtle parallax effect to the hero section background image using CSS scroll-driven animations.

Purpose: Create depth and visual interest as users scroll, making the hero feel more dynamic and engaging without JavaScript overhead.

Output: Hero background that moves at ~0.3x scroll speed, disabled on mobile devices for performance.
</objective>

<execution_context>
@/Users/austinlaw/.claude/get-shit-done/workflows/execute-plan.md
@/Users/austinlaw/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-animation-infrastructure/01-01-SUMMARY.md
@components/sections/HomePage.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CSS scroll-driven parallax to hero background</name>
  <files>components/sections/HomePage.vue</files>
  <action>
Add CSS scroll-driven parallax animation to the hero NuxtImg element:

1. Add a `parallax-image` class to the NuxtImg in the hero section

2. In the scoped style section, add CSS scroll-driven animation:
```css
/* Parallax effect - CSS scroll-driven animation */
@supports (animation-timeline: scroll()) {
  .parallax-image {
    animation: parallax-scroll linear;
    animation-timeline: scroll();
    animation-range: 0vh 100vh;
  }
}

@keyframes parallax-scroll {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(30%);
  }
}
```

3. The animation moves the background down by 30% as user scrolls the first viewport height, creating a parallax ratio of ~0.3 (background moves slower than scroll).

4. Use `@supports` to ensure graceful fallback - browsers without support just see static image.

5. Only use `transform` property (GPU-accelerated, no layout shifts).

Note: The prefers-reduced-motion media query in main.css (from Phase 1) will automatically disable this animation by setting animation-duration to 0.01ms.
  </action>
  <verify>
1. Run `npm run dev` - no build errors
2. Open http://localhost:3000 in Chrome/Firefox
3. Scroll down slowly - hero background should move slower than scroll
4. Inspect element - confirm `animation-timeline: scroll()` is applied
  </verify>
  <done>
Hero background has visible parallax effect - moves at approximately 0.3x scroll speed when scrolling through the hero section.
  </done>
</task>

<task type="auto">
  <name>Task 2: Disable parallax on mobile devices</name>
  <files>components/sections/HomePage.vue</files>
  <action>
Wrap the parallax animation in a media query to disable on mobile/touch devices:

1. Modify the parallax CSS to only apply on larger screens:
```css
/* Parallax effect - desktop only, CSS scroll-driven animation */
@media (min-width: 1024px) {
  @supports (animation-timeline: scroll()) {
    .parallax-image {
      animation: parallax-scroll linear;
      animation-timeline: scroll();
      animation-range: 0vh 100vh;
    }
  }
}

@keyframes parallax-scroll {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(30%);
  }
}
```

2. The 1024px breakpoint (lg in Tailwind) disables parallax on:
   - Mobile phones (portrait and landscape)
   - Most tablets
   - Only enables on desktop-sized screens

3. This addresses iOS Safari parallax issues and saves battery on mobile devices.

Why 1024px: Aligns with Tailwind's `lg` breakpoint and excludes most touch devices. Touch devices have less precise scroll events and parallax can feel janky.
  </action>
  <verify>
1. Open Chrome DevTools, toggle device toolbar (Ctrl+Shift+M)
2. Select iPhone 14 Pro Max (430px) - parallax should NOT be active
3. Select iPad Pro (1024px portrait) - parallax should NOT be active
4. Set viewport to 1025px wide - parallax SHOULD be active
5. Resize browser window across 1024px boundary - parallax toggles on/off
  </verify>
  <done>
Parallax is disabled on viewports below 1024px width; only active on desktop-sized screens.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run dev` runs without errors
2. Desktop (>1024px): Hero background has parallax effect
3. Mobile (<1024px): Hero background is static (no parallax)
4. System reduced-motion enabled: All animations disabled
5. No console errors related to CSS or animations
</verification>

<success_criteria>
1. Hero background moves slower than scroll on desktop (parallax effect visible)
2. Parallax is disabled on mobile devices (viewport < 1024px)
3. Uses only CSS scroll-driven animations (no JavaScript)
4. Only uses transform property (GPU-accelerated)
5. Graceful fallback for unsupported browsers
6. Respects prefers-reduced-motion (via Phase 1 CSS)
</success_criteria>

<output>
After completion, create `.planning/phases/02-section-animations/02-01-SUMMARY.md`
</output>
